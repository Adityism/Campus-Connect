<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campus Connect</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/landing.css') }}">
</head>
<body>
    <div class="container">
        <nav>
            <div class="logo">
                <div class="logo-video">
                    <video autoplay loop muted playsinline>
                        <source src="/static/videos/colorlog.mp4" type="video/mp4">
                    </video>
                </div>
            </div>
            <div class="nav-links">
                <!-- Add theme toggle button before existing nav items -->
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                    <svg class="sun" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <div class="nav-item">
                    <a href="#">About us</a>
                    <div class="nav-popup">
                        <h4>About Us</h4>
                        <ul>
                            <li>Our Story</li>
                            <li>Our Team</li>
                            <li>Our Mission</li>
                            <li>Testimonials</li>
                        </ul>
                    </div>
                </div>
                <div class="nav-item">
                    <a href="#">Services</a>
                    <div class="nav-popup">
                        <h4>Our Services</h4>
                        <ul>
                            <li>Campus Communication</li>
                            <li>Event Management</li>
                            <li>Student Engagement</li>
                            <li>Faculty Resources</li>
                        </ul>
                    </div>
                </div>
                <div class="nav-item">
                    <a href="#">Use Cases</a>
                    <div class="nav-popup">
                        <h4>Use Cases</h4>
                        <ul>
                            <li>Universities</li>
                            <li>Community Colleges</li>
                            <li>Student Organizations</li>
                            <li>Faculty Departments</li>
                        </ul>
                    </div>
                </div>
                <div class="nav-item">
                    <a href="#">Pricing</a>
                    <div class="nav-popup">
                        <h4>Pricing Plans</h4>
                        <ul>
                            <li>Basic</li>
                            <li>Premium</li>
                            <li>Enterprise</li>
                            <li>Custom Solutions</li>
                        </ul>
                    </div>
                </div>
                <div class="nav-item">
                    <a href="#">Community</a>
                    <div class="nav-popup">
                        <h4>Community</h4>
                        <ul>
                            <li>Blog</li>
                            <li>Forums</li>
                            <li>Resources</li>
                            <li>Events</li>
                        </ul>
                    </div>
                </div>
            </div>
            <!-- Update login button to use absolute path -->
            <button class="login-btn" id="loginBtn">Login</button>
            <button class="menu-btn">â˜°</button>
        </nav>

        <!-- Update the hero section HTML -->
        <main class="hero">
            <div class="hero-content">
                <h1 class="hero-title">
                    <span>Connecting Minds</span>
                    <span>Across Campus!</span>
                </h1>
                <p>An AI-powered platform that streamlines campus communication, providing real-time faculty, announcements, and opportunities.</p>
                <button class="connect-btn" id="connectBtn">Connect with us</button>
            </div>
            <div class="hero-img">
                <div class="hero-video">
                    <video autoplay loop muted playsinline>
                        <source src="/static/videos/landing_page.mp4" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                </div>
            </div>
        </main>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-links">
                <div class="footer-link" id="visitBtn">
                    <svg viewBox="0 0 24 24"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                    Pay Us a Visit
                </div>
                <div class="footer-link" id="callBtn">
                    <svg viewBox="0 0 24 24"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>
                    Give Us a Call<br/>
                </div>
                <div class="footer-link" id="messageBtn">
                    <svg viewBox="0 0 24 24"><rect width="20" height="16" x="2" y="4" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg>
                    Send Us a Message
                </div>
            </div>
        </div>
    </footer>

    <!-- Connect with us Modal -->
    <div class="modal" id="connectModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Write to Us</div>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="contactForm">
                    <div class="form-group">
                        <label for="name">Full Name</label>
                        <input type="text" id="name" required placeholder="Enter your name">
                    </div>
                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <input type="email" id="email" required placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone Number</label>
                        <input type="tel" id="phone" placeholder="Enter your phone number (optional)">
                    </div>
                    <div class="form-group">
                        <label for="subject">Subject</label>
                        <input type="text" id="subject" required placeholder="Enter message subject">
                    </div>
                    <div class="form-group">
                        <label for="message">Message</label>
                        <textarea id="message" required placeholder="How can we help you?"></textarea>
                    </div>
                    <button type="submit" class="submit-btn">Send Message</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Visit Modal -->
    <div class="modal" id="visitModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Visit Our Campus</div>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p>We'd love to meet you in person! Our offices are located at:</p>
                <p style="margin: 15px 0; font-weight: bold;">
                    Campus Connect Headquarters<br>
                    123 University Avenue<br>
                    College Town, CT 12345
                </p>
                <p>Office Hours: Monday-Friday, 9am-5pm</p>
                <p>Please schedule an appointment before visiting so we can ensure someone is available to meet with you.</p>
                <button class="submit-btn">Schedule a Visit</button>
            </div>
        </div>
    </div>

    <!-- Call Modal -->
    <div class="modal" id="callModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Call Information</div>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p>We're available to take your call during these hours:</p>
                <p style="margin: 15px 0; font-weight: bold;">
                    Monday-Friday: 8am-8pm EST<br>
                    Saturday: 10am-4pm EST<br>
                    Sunday: Closed
                </p>

                <button class="submit-btn">Request a Callback</button>
            </div>
        </div>
    </div>

    <!-- Message Modal -->
    <div class="modal" id="messageModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Send Us a Message</div>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="messageForm">
                    <div class="form-group">
                        <label for="messageName">Full Name</label>
                        <input type="text" id="messageName" required placeholder="Enter your name">
                    </div>
                    <div class="form-group">
                        <label for="messageEmail">Email Address</label>
                        <input type="email" id="messageEmail" required placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label for="messageText">Message</label>
                        <textarea id="messageText" required placeholder="How can we help you?"></textarea>
                    </div>
                    <button type="submit" class="submit-btn">Send Message</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-container">
            <div class="login-modal">
                <button class="close-modal">&times;</button>
                <div class="login-content">
                    <div class="login-left">
                        <video autoplay loop muted playsinline class="login-video">
                            <source src="/static/videos/loginvid.mp4" type="video/mp4">
                        </video>
                        <div class="login-overlay"></div>
                    </div>
                    <div class="login-right">
                        <div class="login-header">
                            <h2>Welcome to</h1>
                            <h1>Campus Connect</h1>
                            <p class="login-subtitle">Choose your login type</p>
                        </div>
                        
                        <div class="login-buttons">
                            <a href="{{ url_for('auth_login') }}?type=student" class="microsoft-btn">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/4/44/Microsoft_logo.svg" alt="Microsoft"/>
                                <span>Sign in as Student</span>
                            </a>
                            <div class="my-4"></div>
                            <a href="{{ url_for('auth_login') }}?type=faculty" class="microsoft-btn faculty-btn">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/4/44/Microsoft_logo.svg" alt="Microsoft"/>
                                <span>Sign in as Faculty</span>
                            </a>
                        </div>

                        <div class="login-divider">
                            <span>UPES ACCOUNTS ONLY</span>
                        </div>

                        <div class="login-footer">
                            <p>Please use your UPES Microsoft account</p>
                            <p class="domain">@stu.upes.ac.in or @upes.ac.in</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Add this before existing script
        // Theme toggle functionality
        const themeToggle = document.getElementById('themeToggle');
        const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');

        // Function to set theme
        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            
            // Update toggle button icon
            const svg = themeToggle.querySelector('svg');
            if (theme === 'dark') {
                svg.innerHTML = `
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 A7 7 0 0 0 21 12.79z"></path>
                `;
            } else {
                svg.innerHTML = `
                    <circle cx="12" cy="12" r="5"></circle>
                    <line x1="12" y1="1" x2="12" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="23"></line>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                    <line x1="1" y1="12" x2="3" y2="12"></line>
                    <line x1="21" y1="12" x2="23" y2="12"></line>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                `;
            }
        }

        // Initialize theme
        const savedTheme = localStorage.getItem('theme') || 
                          (prefersDarkScheme.matches ? 'dark' : 'light');
        setTheme(savedTheme);

        // Theme toggle click handler
        themeToggle.addEventListener('click', () => {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            setTheme(newTheme);
        });

        // Listen for system theme changes
        prefersDarkScheme.addEventListener('change', (e) => {
            const newTheme = e.matches ? 'dark' : 'light';
            setTheme(newTheme);
        });

        // Existing script content continues here...
        // Modal functionality
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('active');
                document.body.classList.add('modal-open');
                
                // Ensure content is visible
                setTimeout(() => {
                    const content = modal.querySelector('.modal-content') || modal.querySelector('.modal-container');
                    if (content) {
                        content.style.opacity = '1';
                    }
                }, 10);
            }
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                const content = modal.querySelector('.modal-content') || modal.querySelector('.modal-container');
                if (content) {
                    content.style.opacity = '0';
                }
                
                setTimeout(() => {
                    modal.classList.remove('active');
                    document.body.classList.remove('modal-open');
                }, 300);
            }
        }

        // Buttons
        const connectBtn = document.getElementById('connectBtn');
        const loginBtn = document.getElementById('loginBtn');
        const visitBtn = document.getElementById('visitBtn');
        const callBtn = document.getElementById('callBtn');
        const messageBtn = document.getElementById('messageBtn');
        
        // Close buttons
        const closeButtons = document.querySelectorAll('.close-modal');

        // Open modals
        connectBtn.addEventListener('click', () => openModal('connectModal'));
        loginBtn.addEventListener('click', () => openModal('loginModal'));
        visitBtn.addEventListener('click', () => openModal('visitModal'));
        callBtn.addEventListener('click', () => openModal('callModal'));
        messageBtn.addEventListener('click', () => openModal('messageModal'));

        // Close modals
        closeButtons.forEach(button => {
            button.addEventListener('click', () => {
                const modal = button.closest('.modal');
                if (modal) {
                    closeModal(modal.id);
                }
            });
        });

        // Close modal when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                closeModal(e.target.id);
            }
        });

        // Form submissions
        const forms = document.querySelectorAll('form');
        forms.forEach(form => {
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                alert(`Form submitted successfully!`);
                for (const key in modals) {
                    modals[key].classList.remove('active');
                }
            });
        });

        // Add mobile menu functionality
        const menuBtn = document.querySelector('.menu-btn');
        const navLinks = document.querySelector('.nav-links');
        const navItems = document.querySelectorAll('.nav-item');

        menuBtn.addEventListener('click', () => {
            navLinks.classList.toggle('active');
        });

        navItems.forEach(item => {
            item.addEventListener('click', () => {
                item.classList.toggle('active');
            });
        });

        // Close mobile menu when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.nav-links') && !e.target.closest('.menu-btn')) {
                navLinks.classList.remove('active');
                navItems.forEach(item => item.classList.remove('active'));
            }
        });

        // Add body scroll lock when modal opens
        function toggleBodyScroll(isOpen) {
            if (isOpen) {
                document.body.classList.add('modal-open');
            } else {
                document.body.classList.remove('modal-open');
            }
        }

        // Update modal open handlers
        [connectBtn, loginBtn, visitBtn, callBtn, messageBtn].forEach(btn => {
            btn.addEventListener('click', () => {
                const modalId = btn.id.replace('Btn', 'Modal');
                modals[modalId.replace('Modal', '')].classList.add('active');
                toggleBodyScroll(true);
            });
        });

        // Update modal close handlers
        closeButtons.forEach(button => {
            button.addEventListener('click', () => {
                for (const key in modals) {
                    modals[key].classList.remove('active');
                }
                toggleBodyScroll(false);
            });
        });

        window.addEventListener('click', (e) => {
            for (const key in modals) {
                if (e.target === modals[key]) {
                    modals[key].classList.remove('active');
                    toggleBodyScroll(false);
                }
            }
        });

        // Update form submission handler
        const contactForm = document.getElementById('contactForm');
        contactForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                subject: document.getElementById('subject').value,
                message: document.getElementById('message').value
            };

            try {
                const response = await fetch('http://localhost:5001/api/queries/submit', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });

                const data = await response.json();

                if (response.ok) {
                    // Show success message
                    alert('Thank you for your message! We will get back to you soon.');
                    contactForm.reset();
                    closeModal('connectModal');
                } else {
                    // Show error message
                    alert(data.error || 'Failed to send message. Please try again.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Failed to send message. Please try again.');
            }
        });
    </script>
</body>
</html>
